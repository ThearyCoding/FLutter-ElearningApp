import 'package:intl/intl.dart';

String formatTimestamp(DateTime timestamp) {
  final now = DateTime.now();
  final difference = now.difference(timestamp.toUtc());

  if (difference.inMinutes < 1) {
    return 'Just now';
  } else if (difference.inMinutes < 60) {
    return '${difference.inMinutes}m';
  } else if (difference.inHours < 24) {
    return '${difference.inHours}h';
  } else if (difference.inDays < 7) {
    return '${difference.inDays}d';
  } else {
    // Check if the timestamp is within the current year
    if (timestamp.year == now.year) {
      // Format the timestamp to only display month and day
      final formatter = DateFormat('MMMM dd');
      return formatter.format(timestamp);
    } else {
      // Format the timestamp to display the full date including the year
      final formatter = DateFormat('MMMM dd yyyy');
      return formatter.format(timestamp);
    }
  }
}

// Example usage:
DateTime timestamp = DateTime(2024, 4, 21);
String formattedTimestamp = formatTimestamp(timestamp);
print(formattedTimestamp); // Output will be like: "April 21 2024"


String getTimeDifference(DateTime timestamp) {
    final now = DateTime.now();
    final difference = now.difference(timestamp.toUtc());

    if (difference.inMinutes < 1) {
      return 'Just now';
    } else if (difference.inMinutes < 60) {
      return '${difference.inMinutes}m';
    } else if (difference.inHours < 24) {
      return '${difference.inHours}h';
    } else if (difference.inDays < 7) {
      return '${difference.inDays}d';
    } else if (difference.inDays < 30) {
      return '${(difference.inDays / 7).floor()}w';
    } else if (difference.inDays < 365) {
      return '${(difference.inDays / 30).floor()}mo';
    } else {
      return '${(difference.inDays / 365).floor()}y';
    }
  }
